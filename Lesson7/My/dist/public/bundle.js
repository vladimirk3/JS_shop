!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r};n(5),n(6);new Vue(i.default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(2)),o=c(n(3)),i=c(n(4));function c(t){return t&&t.__esModule?t:{default:t}}var a=new Vue({el:"#app",data:{},components:{cart:r.default,catalog:o.default,search:i.default},methods:{getJSON:function(t){return fetch(t).then(function(t){return t.json()}).catch(function(t){console.log(t)})},postJSON:function(t,e){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(t){return t.json()}).catch(function(t){console.log(t)})},putJSON:function(t,e){return fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(t){return t.json()}).catch(function(t){console.log(t)})},deleteJSON:function(t,e){return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){console.log(t)})}},mounted:function(){}});e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{imgCart:"https://placehold.it/100x80",cartUrl:"/api/cart",cartItems:[],shown:!1}},components:{"cart-item":{props:["img","item"],template:'<div class="cart-item">\n                    <div class="product-bio">\n                        <img :src="img" alt="Some img">\n                        <div class="product-desc">\n                            <p class="product-title"> {{ item.product_name }} </p>\n                            <p class="product-quantity">К-во: {{ item.quantity }} </p>\n                            <p class="product-single-price">$ {{ item.price }} each</p>\n                        </div>\n                    </div>\n                    <div class="right-block">\n                        <p class="product-price">{{ item.price * item.quantity }}</p>\n                        <button class="del-btn" @click="$root.$refs.cart.removeProduct(item)">&times;</button>\n                    </div>\n                </div>'}},methods:{addProduct:function(t){var e=this,n=this.cartItems.find(function(e){return e.id_product===t.id_product});if(n)this.$parent.putJSON("/api/cart/"+n.id_product,{quantity:1}).then(function(t){t.result&&n.quantity++});else{var r=Object.assign({quantity:1},t);this.$parent.postJSON("/api/cart",r).then(function(t){t.result&&e.cartItems.push(r)})}},removeProduct:function(t){var e=this;t.quantity>1?this.$parent.putJSON("/api/cart/"+t.id_product,{quantity:-1}).then(function(e){e.result&&t.quantity--}):this.$parent.deleteJSON("/api/cart/"+t.id_product,t).then(function(n){n.result&&e.cartItems.splice(e.cartItems.indexOf(t),1)})}},mounted:function(){var t=this;this.$parent.getJSON(this.cartUrl).then(function(e){var n=!0,r=!1,o=void 0;try{for(var i,c=e.contents[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var a=i.value;t.cartItems.push(a)}}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}})},template:'\n                <div style="display:inline">\n                    <button class="btn-cart" type="button" @click="shown = !shown">Корзина</button>\n                    <div class="cart-block" v-show="shown">\n                        <p v-if="!cartItems.length"> Cart is empty </p>\n                        <cart-item \n                        v-for="product of cartItems"\n                        :key="product.id_product"\n                        :img="imgCart"\n                        :item="product"\n                        ></cart-item>\n                    </div>\n                </div>'};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{products:[],filtered:[],catImg:"https://placehold.it/200x150",catalogUrl:"/api/products"}},components:{"cat-item":{props:["imgCat","item"],template:' <div class="product-item">  \n                    <img :src="imgCat" alt="Some img">\n                    <div class="desc">\n                        <h3> {{ item.product_name }}</h3>\n                        <p>{{ item.price }} $</p>\n                        <button class="buy-btn" @click="$parent.addProduct(item)">Купить</button>\n                    </div>\n                </div>'}},methods:{addProduct:function(t){this.$root.$refs.cart.addProduct(t)}},mounted:function(){var t=this;this.$parent.getJSON(this.catalogUrl).then(function(e){var n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var a=i.value;t.products.push(a),t.filtered.push(a)}}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}})},template:'\n        <div class="products"> \n            <cat-item \n                v-for="product of filtered"\n                    :key="product.id_product"\n                    :imgCat="catImg"\n                    :item="product"\n            ></cat-item>\n        </div>'};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{catalogUrl:"/api/products",userSearch:""}},components:{},methods:{filterItems:function(){var t=new RegExp(this.userSearch,"i");this.$root.$refs.catalog.filtered=this.$root.$refs.catalog.products.filter(function(e){return t.test(e.product_name)})}},mounted:function(){},template:'\n    <form action="#" class="search-form" @submit.prevent="filterItems()">\n        <input type="text" class="search-field" v-model="userSearch">\n        <button class="btn-search" type="submit" @click = "filterItems()">\n            <i class="fas fa-search"></i>\n        </button>\n    </form>\n    '};e.default=r},function(t,e,n){},function(t,e,n){}]);